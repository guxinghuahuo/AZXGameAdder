# AZX Game Adder Helper (Ten Helper)

这是一个用于辅助解决数字矩阵消除游戏（通常目标是框选总和为 10 的矩形）的 Python 工具。该项目使用 **OpenCV** 进行图像识别（模板匹配），并能通过简单的算法自动寻找最优解。

## ✨ 功能特点

  * **模板制作工具**：包含一个辅助脚本，方便从游戏截图中提取并标记数字模板，以适应不同的分辨率或字体。
  * **实时识别模式**：能够实时截取屏幕指定区域，识别数字矩阵。
  * **自动求解**：自动计算并高亮显示所有数字之和为 10 的矩形区域。
  * **全局热键支持**：无需频繁切换窗口，通过快捷键即可控制识别和刷新。
  * **高精度**：使用模板匹配（Template Matching）代替传统的 OCR，对于像素风格或固定字体的游戏识别率极高。

## 🛠️ 环境依赖

在使用本工具前，请确保已安装 Python 3.x，并安装以下依赖库：

```bash
pip install opencv-python numpy mss keyboard
```

## 📂 文件说明

  * **`make_templates.py`**:  
    **模板生成器**。用于从一张游戏截图中切割并手动标记数字，生成用于识别的模板图片（保存在 `templates/` 文件夹中）。如果你更换了显示器分辨率或游戏字体改变，需要运行此脚本重新制作模板。

  * **`ten_helper_tm.py`**:  
    **主程序**。运行此脚本以启动游戏助手。它会加载模板，让用户框选游戏区域，并进行实时识别和计算。

  * **`templates/`**:  
    存放数字 1-9 的模板图片文件。

## 🚀 使用指南

### 第一步：准备模板 (如果需要)

如果是首次使用，或者识别准确率低，建议先生成适合你屏幕的模板：

1.  截取一张游戏界面的全屏截图，命名为 `1.png` 并放在项目根目录。
2.  运行 `make_templates.py`：
    ```bash
    python make_templates.py
    ```
3.  程序会弹出一个窗口，用鼠标**框选**整个数字棋盘区域，按回车确认。
4.  程序会将棋盘切割成小格子并逐个显示。
      * 按下键盘 **1-9**：将其标记为对应的数字并保存。
      * 按下 **0** 或 **空格**：跳过该格子（例如空白格或无法识别的干扰项）。
      * 按下 **ESC**：结束标记。

### 第二步：运行助手

1.  确保游戏正在运行。
2.  运行主程序：
    ```bash
    python ten_helper_tm.py
    ```
3.  程序会截取当前屏幕，弹出一个 "Select board" 窗口。请用鼠标**精准框选**游戏中的数字矩阵区域（不要包含边框装饰），按回车或空格确认。
4.  程序进入待机模式。

### 🎮 快捷键与控制

  * **`Ctrl + Shift + X`**： **开启/停止** 实时识别模式。
      * 开启后，程序会创建一个 "Ten Helper" 窗口，覆盖在游戏上层（或并在旁显示），实时用红框标出可消除的矩形。
  * **`Ctrl + Shift + Z`**： **强制刷新**。
      * 如果游戏局面变化但助手没反应，按此键立即重新扫描。
  * **`ESC`**： 退出程序。

## ⚙️ 配置说明

在 `ten_helper_tm.py` 文件顶部，你可以修改以下常量来适配不同的游戏模式：

  * `BOARD_ROWS` / `BOARD_COLS`: 修改棋盘的行数和列数（默认为 16x10）。
  * `TARGET_SUM`: 修改目标和（默认为 10）。
  * `SHOW_ALL_RECTANGLES`: 设置为 `True` 显示所有解，或 `False` 仅显示推荐的最优解。

## ⚠️ 注意事项

  * 本工具依赖屏幕截图，请确保游戏窗口不要被遮挡。
  * 如果识别出现大量问号 `?`，说明模板不匹配，请重新运行 `make_templates.py` 更新模板。
